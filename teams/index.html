<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KSC Wiedikon Rankings and Results</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Aptos:wght@300;400;500;600;700&display=swap');
    * { box-sizing: border-box; }
    html {
      -webkit-text-size-adjust: 100%;  /* prevent auto‑inflation on iOS */
      -ms-text-size-adjust: 100%;      /* prevent auto‑inflation on IE Mobile */
    }
    body {
      font-family: 'Aptos', sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f4f8;
      color: #2d3748;
      line-height: 1.6;
    }
    /* this is your “design width” */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      transition: transform 0.2s ease-out;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 { margin: 0 0 20px; font-size: 2.2rem; font-weight: 600; }
    .team-selector { text-align: center; margin-bottom: 30px; }
    .team-selector select {
      padding: 10px 16px;
      font-size: 16px;
      font-weight: 500;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      min-width: 280px;
    }
    .content-section {
      background: white;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .content-section h2 { margin: 0 0 20px; font-size: 1.6rem; font-weight: 600; }
    .sub-section h3 { margin: 1.5em 0 0.5em; font-size: 1.25rem; font-weight: 500; }
    .table-wrapper { overflow-x: auto; } /* you can keep this, but with scaling it won’t be needed */
    table.dataTable {
      width: 100% !important;
      font-size: 12px;
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    table.dataTable thead th {
      background: #1e40af;
      color: white;
      font-weight: 600;
      padding: 12px 8px;
      text-align: left;
      font-size: 11px;
      text-transform: uppercase;
    }
    table.dataTable tbody td {
      padding: 10px 8px;
      border-bottom: 1px solid #e2e8f0;
      transition: background-color .2s;
      white-space: nowrap;
    }
    table.dataTable tbody tr:last-child td { border-bottom: none; }
    table.dataTable tbody tr:nth-child(even) { background-color: #f8f9fa; }
    .error-message {
      color: #c53030;
      background: #fed7d7;
      padding: 16px;
      border-radius: 12px;
      margin: 20px 0;
      border-left: 4px solid #e53e3e;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 id="page-title">KSC Wiedikon Rankings and Results</h1>
      <div class="team-selector">
        <select id="team-selector">
          <option value="1395" selected>KSC Wiedikon D1</option>
          <option value="1393">KSC Wiedikon D2</option>
          <option value="4689">KSC Wiedikon D3</option>
          <option value="1394">KSC Wiedikon D4</option>
          <option value="2301">KSC Wiedikon DU23-1</option>
          <option value="14040">KSC Wiedikon DU23-2</option>
          <option value="2743">KSC Wiedikon H1</option>
          <option value="541">KSC Wiedikon H2</option>
          <option value="12747">KSC Wiedikon H3</option>
          <option value="6023">KSC Wiedikon Legends</option>
          <option value="7563">KSC Wiedikon HU23-1</option>
        </select>
      </div>
    </div>

    <div class="content-section">
      <h2>Rankings</h2>
      <div id="rankings-container"></div>
    </div>

    <div class="content-section">
      <h2>Results</h2>
      <div id="results-container"></div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script>
    // dynamic scale-to-fit script:
    function scaleToFit() {
      const container = document.querySelector('.container');
      const designWidth = 1400;
      const vw = Math.max(document.documentElement.clientWidth, window.innerWidth);
      const ratio = vw / designWidth;
      if (ratio < 1) {
        container.style.transform = `scale(${ratio})`;
        container.style.transformOrigin = 'top center';
      } else {
        container.style.transform = '';
      }
    }
    window.addEventListener('load',  scaleToFit);
    window.addEventListener('resize', scaleToFit);

    // --- your existing data‐loading code below ---
    const RANKINGS_API = "https://volley-rankings-n72zsqdqea-oa.a.run.app";
    const RESULTS_API  = "https://volley-results-n72zsqdqea-oa.a.run.app";

    function formatDate(d) {
      if (!d) return "";
      const dt = new Date(d);
      if (isNaN(dt)) return d;
      const pad = n => n.toString().padStart(2,"0");
      return `${pad(dt.getDate())}.${pad(dt.getMonth()+1)}.${dt.getFullYear().toString().slice(-2)}`;
    }
    function formatTime(d) {
      if (!d) return "";
      const dt = new Date(d);
      if (isNaN(dt)) return d;
      const pad = n => n.toString().padStart(2,"0");
      return `${pad(dt.getHours())}:${pad(dt.getMinutes())}`;
    }
    const teamNames = {
      "12747":"KSC Wiedikon H3","1394":"KSC Wiedikon D4","14040":"KSC Wiedikon DU23-2",
      "7563":"KSC Wiedikon HU23-1","1393":"KSC Wiedikon D2","541":"KSC Wiedikon H2",
      "6023":"KSC Wiedikon Legends","4689":"KSC Wiedikon D3","2743":"KSC Wiedikon H1",
      "1395":"KSC Wiedikon D1","2301":"KSC Wiedikon DU23-1"
    };
    async function loadData(teamId) {
      $("#page-title").text(`${teamNames[teamId]} Rankings and Results`);
      // ... (exactly your existing DataTables setup)
    }
    function showError(selector,msg) {
      $(selector).html(`<div class="error-message">${msg}</div>`);
    }
    $(async function() {
      await loadData("1395");
      $("#team-selector").change(function() {
        loadData($("#team-selector").val());
      });
    });
  </script>
</body>
</html>
